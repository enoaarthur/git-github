package pageObjects;

import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.CacheLookup;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.PageFactory;


public class ExpediaPage {
	
public WebDriver l2driver;
	
	public ExpediaPage (WebDriver r2driver) {
		l2driver = r2driver;
		PageFactory.initElements(r2driver, this);
		
	}
	
	
		  @FindBy(linkText="Flights")
	      @CacheLookup
	      WebElement linkTextFlight;
	
		  @FindBy(xpath="//a[@data-testid='travelers-field']")
		  @CacheLookup
		  WebElement linkTraveler;
	
	
		
		  @FindBy(xpath="//div[@id='location-field-leg1-origin-menu']/div/ul")
		  @CacheLookup 
		  WebElement listOfDep;
		  
	
	     @FindBy(xpath="//div[@id='location-field-leg1-destination-menu']/div/ul")
	     @CacheLookup
	     WebElement listOfDest;
	
	 
	  	  @FindBy(xpath="//div[@id='location-field-leg1-origin-menu']"
		  		+ "/div/button[@class='uitk-faux-input']")
		  @CacheLookup 
		  WebElement btnDepField;
	
	  	  
	  	  @FindBy(xpath="//div[@id='location-field-leg1-destination-menu']"
		  		+ "/div/button")
		  @CacheLookup 
		  WebElement btnDestField;
	  
	      @FindBy(xpath="//button[@data-testid='submit-button']")
		  @CacheLookup 
		  WebElement btnSubmit;
	      
	      @FindBy(xpath="//div[@data-testid='room-1']/div/div/button[2]")
	      @CacheLookup
	      WebElement increaseChildBtn;
	      
	      @FindBy(xpath="//div[@data-testid='room-1']")
	      @CacheLookup
	      WebElement listOfDiv;
	 
	 
	

	public void clickOnFlightLink() {
		linkTextFlight.click();
	}
	
	public void clickOnSubmit() {
		btnSubmit.click();
	}
	
	public void addAChild() {
		
		List<WebElement> listOfElements = listOfDiv.findElements(By.tagName("div[@class='uitk-flex']"));
		WebElement child = listOfElements.get(2).findElement(By.xpath("//button[1]"));
		System.out.println("Number of Element"+listOfElements.size());
		System.out.println("Child Element = "+child.getText());
		//increaseChildBtn.click();
	}
	
	public void setDepAndDestSearKeys(String dep,String dest) throws InterruptedException {
		
		btnDepField.click();
		btnDepField.sendKeys(dep);
		
		Thread.sleep(4000);
		
		List<WebElement> optionsDep = listOfDep.findElements(By.tagName("li"));
		optionsDep.get(0).click();

		    
		//Thread.sleep(4000);
		btnDestField.click();
		btnDestField.sendKeys(dest);
		
		List<WebElement> optionsDest = listOfDest.findElements(By.tagName("li"));
		Thread.sleep(2000);
		optionsDest.get(0).click();
		linkTraveler.click();
		Thread.sleep(2000);
	}
}
